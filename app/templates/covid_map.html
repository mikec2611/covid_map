<html>
	<head>
		<title>U.S. Covid-19 County Map</title>
		<meta charset="utf-8">
		<meta name="description" content="Interactive map vizualizing Covid-19 data by county in the United States.">

		<!-- Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-40220685-1"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'UA-40220685-1');
		</script>

		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
		<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.css" />
		<link rel="stylesheet" href="{{ url_for('static', filename='css/covid_map.css') }}" />

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
		<script src="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
		<script src="https://kit.fontawesome.com/b309449b5a.js" crossorigin="anonymous"></script>
		<script type="text/javascript" src="{{ url_for('static', filename='js/covid_map.js') }}"></script>
		<script type="text/javascript" src="{{ url_for('static', filename='js/jquery.number.min.js') }}"></script>

		<script type="text/javascript">
			var unique_county = {{ unique_county|tojson }}
			var geodata_county = {{ geodata_county|tojson }}
			var geodata_state = {{ geodata_state|tojson }}
			var date_list = {{ date_list|tojson }}
		</script>

	</head>
	<body>
		<h1 style="display:none">Interactive map vizualizing Covid-19 data by county in the United States. Includes current and daily reported cases and deaths in map and chart form. Hover over the heatmap to view coronavirus statistics for that county. Click a county to show the line and bar charts graphing covid 19 cases and deaths by U.S. county. View trends over time using the slider which updates the map visual automatically. Data refreshed daily using automated scripts.</h1>
		<!-- app shader-->
		<div id="app_shader"></div>

		<!-- top bar-->
		<div id="top_bar" class="control_box">
			<div id="btn_info" class="top_bar_section"><i class="fas fa-info-circle"></i></div>
			<div id="page_title" class="top_bar_section">Covid-19 US County Map</div>
			<div id="data_update" class="top_bar_section">Data Range: <span id="data_update_val"></span></div>
			<div id="top_bar_spacer" class="top_bar_section"></div>
		</div>

		<!-- sources/tech/etc info box -->
		<table id="app_info_box" class="control_box">
			<thead>
				<tr>
					<th id="ai_version" class="ai_header1"> Version 1.0</th>
					<th id="ai_close" class="ai_header1"><i class="far fa-window-close"></i></th>
				</tr>
				<tr>
					<th colspan="2" class="ai_header2">Sources</th>
				</tr>
			</thead>
			<tbody>
				<tr class="ai_row">
					<td class="ai_label">Covid-19 Data:</td>
					<td class="ai_val">The New York Times, based on reports from state and local health agencies. (<a target="_blank" href="https://www.nytimes.com/interactive/2020/us/coronavirus-us-cases.html">Link</a>)</td>
				</tr>
				<tr class="ai_row">
					<td class="ai_label">Shapefiles:</td>
					<td class="ai_val">US Census Bureau</td>
				</tr>
			</tbody>
		</table>

		<!-- map -->
		<div id="map"></div>

		<!-- tooltip box -->
		<table id="tooltip_box" class="control_box">
			<thead id="tooltip_header">
				<tr>
					<th colspan="2" id="tooltip_header_name"></th>
				</tr>
				<tr>
					<th id="tooltip_header_type"></th>
					<th id="tooltip_header_date"></th>
				</tr>
			</thead>
			<tbody id="tooltip_body">
			</tbody>
		</table>

		<!-- data type control box -->
		<table id="data_options_box" class="control_box">

			<!-- metric -->

			<tbody>
				<tr>
					<td class="dataopt_title" colspan="2">Metric</ts>
				</tr>
				<tr>
					<td class="rb_dataopt_box">
						<input id="dataopt_cases" class="rb_dataopt_metric rb_dataopt" type="radio" name="dataopt_metric" value="cases" checked="checked">Reported Cases</input>
					</td>
				</tr>
				<tr>
					<td class="rb_dataopt_box">
						<input id="dataopt_deaths" class="rb_dataopt_metric rb_dataopt" type="radio" name="dataopt_metric" value="deaths">Reported Deaths</input>
					</td>
				</tr>
<!-- 				<tr>
					<td class="rb_dataopt_box" title="Cases per Capita">
						<input id="dataopt_casePC" class="rb_dataopt" type="radio" name="dataopt_type" value="casePC">Cases Per Capita</input>
					</td>
				</tr> -->

				<!-- data type -->
				<tr><td colspan="2" class="dataopt_spacer"></td></tr>
				<tr><td colspan="2" class="dataopt_title" id="dataopt_title_2">Data Type</td></tr>
				<tr>
					<td class="rb_dataopt_box">
						<input id="dataopt_current" class="rb_dataopt_type rb_dataopt" type="radio" name="dataopt_type" value="current" checked="checked">Current Count</input>
					</td>
				</tr>
				<tr>
					<td class="rb_dataopt_box">
						<input id="dataopt_daily" class="rb_dataopt_type rb_dataopt" type="radio" name="dataopt_type" value="daily" >Daily Count</input>
					</td>
				</tr>
			</tbody>
		</table>

		<!-- legend -->
		<table id="legend_box" class="control_box">
			<thead>
				<tr>
					<th colspan="2" id="legend_data_metric"></th>
				</tr>
				<tr>
					<th colspan="2" id="legend_data_type"></th>
				</tr>
			</thead>
			<tbody id="legend_body">
			</tbody>
		</table>

		<!-- date slider control box -->
		<table id="slider_container" class="control_box">
			<tbody>
				<tr>
					<td id='slider_min_box' class="slider_val_box"></td>
					<td id='slider_info_box'></td>
					<td id='slider_max_box' class="slider_val_box"></td>
				</tr>
				<tr>
					<td colspan="3">
						<div id='date_slider'></div>
					</td>
				</tr>
			</tbody>
		</table>

 		<!-- county search box-->
<!--		<table id="county_search_box" class="control_box">
			<tbody>
				<tr>
					<td id="cs_label">Search for county:</td>
					<td id="cs_input_box">
						<input id="cs_input" name="cs_input" type="text"></td>
					</td>
				</tr>
			</tbody>
		</table> -->

		<!-- county info box -->
		<table id="county_info_box" class="control_box">
			<thead>
				<tr>
<!-- 					<th id="ci_options_metric ci_options_box">
						<input id="dataopt_cases_chart" class="rb_dataopt_metric_chart rb_dataopt_chart" type="radio" name="dataopt_metric_chart" value="cases" checked="checked">Reported Cases</input>

						<input id="dataopt_deaths_chart" class="rb_dataopt_metric_chart rb_dataopt_chart" type="radio" name="dataopt_metric_chart" value="deaths">Reported Deaths</input>
					</th>
 -->
					<th class="ci_options_box" id="ci_options_1">
						<input id="dataopt_current_chart" class="rb_dataopt_type_chart rb_dataopt_chart" type="radio" name="dataopt_type_chart" value="current" checked="checked">Current Count</input>
					</th>
					<th class="ci_options_box" id="ci_options_2">
						<input id="dataopt_daily_chart" class="rb_dataopt_type_chart rb_dataopt_chart" type="radio" name="dataopt_type_chart" value="daily">Daily Count</input>
					</th>

					<th id="ci_close"><i class="far fa-window-close"></i></th>
				</tr>
			</thead>
			<tbody id="county_info_body">
				<tr>
					<td colspan="3">
						<canvas id="county_chart_container" height=125px></canvas>
					</td>
				</tr>
			</tbody>
		</table>
	</body>
</html>